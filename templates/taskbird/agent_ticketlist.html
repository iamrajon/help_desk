{% extends "taskbird/agent.html" %}

{% block dynamic_content %}

    <div class="pt-20 pb-8 bg-gray-100 min-h-screen px-4 md:px-6">
        <div class="max-w-7xl mx-auto">
            <!-- Filter Dropdown and Toggle -->
            <div class="mb-6">
                <!-- Dropdown Filter -->
                <div id="filter-container" class="relative">
                    <button id="filter-toggle" class="bg-blue-600 text-white px-4 py-2 rounded-md flex items-center hover:bg-blue-700 transition w-full sm:w-auto">
                        <span>Filter Tickets</span>
                        <svg id="filter-arrow" class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
                        </svg>
                    </button>
                    <div id="filter-form" class="hidden absolute left-0 right-0 mt-2 bg-white rounded-xl shadow-lg p-6 z-20">
                        <form method="GET" class="space-y-4">
                            <div>
                                <label for="category" class="block text-sm font-medium text-gray-700">Category</label>
                                <select id="category" name="category" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-800">
                                    <option value="">All Categories</option>
                                    <option value="1">Technical</option>
                                    <option value="2">Billing</option>
                                    <option value="3">General</option>
                                </select>
                            </div>
                            <div>
                                <label for="priority" class="block text-sm font-medium text-gray-700">Priority</label>
                                <select id="priority" name="priority" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-800">
                                    <option value="">All Priorities</option>
                                    <option value="1">Low</option>
                                    <option value="2">Medium</option>
                                    <option value="3">High</option>
                                </select>
                            </div>
                            <div>
                                <label for="status" class="block text-sm font-medium text-gray-700">Status</label>
                                <select id="status" name="status" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-800">
                                    <option value="">All Statuses</option>
                                    <option value="1">Open</option>
                                    <option value="2">In Progress</option>
                                    <option value="3">Closed</option>
                                </select>
                            </div>
                            <div>
                                <label for="channel" class="block text-sm font-medium text-gray-700">Channel</label>
                                <select id="channel" name="channel" class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 text-sm text-gray-800">
                                    <option value="">All Channels</option>
                                    <option value="FORM">Form</option>
                                    <option value="CHAT">Live Chat</option>
                                </select>
                            </div>
                            <div class="flex justify-end space-x-2">
                                <button type="button" id="filter-cancel" class="px-4 py-2 text-gray-600 hover:text-gray-800 text-sm font-medium">Cancel</button>
                                <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm font-medium">Apply</button>
                            </div>
                        </form>
                    </div>
                </div>
                <!-- Toggle Switch -->
                <div class="flex justify-between items-center mt-4">
                    <h1 class="text-2xl font-bold text-gray-800">Support Tickets</h1>
                    <div class="flex items-center space-x-3">
                        <span class="text-sm font-medium text-gray-600">Table</span>
                        <button id="view-toggle" class="relative inline-flex h-6 w-11 items-center rounded-full bg-gray-300 focus:outline-none">
                            <span class="inline-block h-4 w-4 transform rounded-full bg-white transition translate-x-5"></span>
                        </button>
                        <span class="text-sm font-medium text-gray-600">Cards</span>
                    </div>
                </div>
            </div>

            <!-- Ticket Content -->
            <div id="ticket-content">
                <!-- Card View -->
                <div id="card-view" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Sample Ticket 1 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden h-64 flex flex-col transition hover:shadow-xl hover:-translate-y-1">
                        <div class="bg-gray-800 text-white px-4 py-3 flex justify-between items-center">
                            <span class="text-sm font-semibold">TKT1001</span>
                            <span class="text-xs">Jul 25, 2025</span>
                        </div>
                        <div class="p-6 flex-1">
                            <h3 class="text-base font-semibold text-gray-800 truncate">Login Issue</h3>
                            <p class="text-sm text-gray-600 mt-2 line-clamp-2">User reports inability to log in due to incorrect password error.</p>
                            <div class="mt-4 space-y-2 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Customer:</span>
                                    <span class="font-medium text-gray-700">john_doe</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Priority:</span>
                                    <span class="font-medium text-red-600">High</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Status:</span>
                                    <span class="font-medium text-blue-600">Open</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200">
                            <a href="#" class="text-blue-500 hover:text-blue-600 text-sm font-semibold">View Details</a>
                            <span class="text-green-600 text-sm font-medium">Active</span>
                        </div>
                    </div>
                    <!-- Sample Ticket 2 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden h-64 flex flex-col transition hover:shadow-xl hover:-translate-y-1">
                        <div class="bg-gray-800 text-white px-4 py-3 flex justify-between items-center">
                            <span class="text-sm font-semibold">TKT1002</span>
                            <span class="text-xs">Jul 24, 2025</span>
                        </div>
                        <div class="p-6 flex-1">
                            <h3 class="text-base font-semibold text-gray-800 truncate">Billing Dispute</h3>
                            <p class="text-sm text-gray-600 mt-2 line-clamp-2">Customer charged twice for the same subscription.</p>
                            <div class="mt-4 space-y-2 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Customer:</span>
                                    <span class="font-medium text-gray-700">alice_w</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Priority:</span>
                                    <span class="font-medium text-yellow-600">Medium</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Status:</span>
                                    <span class="font-medium text-purple-600">In Progress</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200">
                            <a href="#" class="text-blue-500 hover:text-blue-600 text-sm font-semibold">View Details</a>
                            <span class="text-green-600 text-sm font-medium">Active</span>
                        </div>
                    </div>
                    <!-- Sample Ticket 3 -->
                    <div class="bg-white rounded-xl shadow-lg overflow-hidden h-64 flex flex-col transition hover:shadow-xl hover:-translate-y-1">
                        <div class="bg-gray-800 text-white px-4 py-3 flex justify-between items-center">
                            <span class="text-sm font-semibold">TKT1003</span>
                            <span class="text-xs">Jul 23, 2025</span>
                        </div>
                        <div class="p-6 flex-1">
                            <h3 class="text-base font-semibold text-gray-800 truncate">Feature Request</h3>
                            <p class="text-sm text-gray-600 mt-2 line-clamp-2">Request for new dashboard customization options.</p>
                            <div class="mt-4 space-y-2 text-sm">
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Customer:</span>
                                    <span class="font-medium text-gray-700">bob_m</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Priority:</span>
                                    <span class="font-medium text-green-600">Low</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-gray-500 font-medium">Status:</span>
                                    <span class="font-medium text-gray-600">Closed</span>
                                </div>
                            </div>
                        </div>
                        <div class="bg-gray-50 px-4 py-3 flex justify-between items-center border-t border-gray-200">
                            <a href="#" class="text-blue-500 hover:text-blue-600 text-sm font-semibold">View Details</a>
                            <span class="text-red-600 text-sm font-medium">Inactive</span>
                        </div>
                    </div>
                </div>

                <!-- Table View -->
                <div id="table-view" class="hidden bg-white rounded-xl shadow-lg overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Ticket ID</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Customer</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Priority</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Action</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-200">
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-900">TKT1001</td>
                                <td class="px-4 py-3 text-sm text-gray-900 truncate max-w-xs">Login Issue</td>
                                <td class="px-4 py-3 text-sm text-gray-900">john_doe</td>
                                <td class="px-4 py-3 text-sm text-red-600">High</td>
                                <td class="px-4 py-3 text-sm text-blue-600">Open</td>
                                <td class="px-4 py-3 text-sm text-gray-900">Jul 25, 2025</td>
                                <td class="px-4 py-3"><a href="#" class="text-blue-500 hover:text-blue-600 text-sm font-medium">View</a></td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-900">TKT1002</td>
                                <td class="px-4 py-3 text-sm text-gray-900 truncate max-w-xs">Billing Dispute</td>
                                <td class="px-4 py-3 text-sm text-gray-900">alice_w</td>
                                <td class="px-4 py-3 text-sm text-yellow-600">Medium</td>
                                <td class="px-4 py-3 text-sm text-purple-600">In Progress</td>
                                <td class="px-4 py-3 text-sm text-gray-900">Jul 24, 2025</td>
                                <td class="px-4 py-3"><a href="#" class="text-blue-500 hover:text-blue-600 text-sm font-medium">View</a></td>
                            </tr>
                            <tr>
                                <td class="px-4 py-3 text-sm text-gray-900">TKT1003</td>
                                <td class="px-4 py-3 textწ
                                <td class="px-4 py-3 text-sm text-gray-900">bob_m</td>
                                <td class="px-4 py-3 text-sm text-green-600">Low</td>
                                <td class="px-4 py-3 text-sm text-gray-600">Closed</td>
                                <td class="px-4 py-3 text-sm text-gray-900">Jul 23, 2025</td>
                                <td class="px-4 py-3"><a href="#" class="text-blue-500 hover:text-blue-600 text-sm font-medium">View</a></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- JavaScript for Toggle and Dropdown -->
            <script>
                const viewToggle = document.getElementById('view-toggle');
                const cardView = document.getElementById('card-view');
                const tableView = document.getElementById('table-view');
                const toggleSpan = viewToggle.querySelector('span');
                const filterToggle = document.getElementById('filter-toggle');
                const filterForm = document.getElementById('filter-form');
                const filterArrow = document.getElementById('filter-arrow');
                const filterCancel = document.getElementById('filter-cancel');
                const ticketContent = document.getElementById('ticket-content');

                // View Toggle
                viewToggle.addEventListener('click', () => {
                    const isCardView = cardView.classList.contains('hidden');
                    cardView.classList.toggle('hidden', !isCardView);
                    tableView.classList.toggle('hidden', isCardView);
                    toggleSpan.classList.toggle('translate-x-5', isCardView);
                    toggleSpan.classList.toggle('translate-x-1', !isCardView);
                });

                // Filter Dropdown
                filterToggle.addEventListener('click', () => {
                    const isOpen = !filterForm.classList.contains('hidden');
                    filterForm.classList.toggle('hidden', isOpen);
                    filterArrow.classList.toggle('rotate-180', !isOpen);
                    ticketContent.style.marginTop = isOpen ? '0' : filterForm.offsetHeight + 'px';
                });

                filterCancel.addEventListener('click', () => {
                    filterForm.classList.add('hidden');
                    filterArrow.classList.remove('rotate-180');
                    ticketContent.style.marginTop = '0';
                });

                // Close dropdown when clicking outside
                document.addEventListener('click', (event) => {
                    if (!filterToggle.contains(event.target) && !filterForm.contains(event.target)) {
                        filterForm.classList.add('hidden');
                        filterArrow.classList.remove('rotate-180');
                        ticketContent.style.marginTop = '0';
                    }
                });
            </script>
        </div>
    </div>

{% endblock dynamic_content %}


